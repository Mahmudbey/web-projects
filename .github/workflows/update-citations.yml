run: |
          python -c "
          import requests
          import yaml
          import os
          from scholarly import scholarly

          stats = {'scopus': {}, 'scholar': {}}

          # 1. Scopus - Odatda juda tez va barqaror
          print('--- Fetching Scopus Data ---')
          try:
              scopus_url = f'https://api.elsevier.com/content/author/author_id/{os.environ[\"SCOPUS_ID\"]}'
              headers = {'X-ELS-APIKey': os.environ['SCOPUS_API_KEY'], 'Accept': 'application/json'}
              r = requests.get(scopus_url, headers=headers, timeout=20)
              if r.status_code == 200:
                  data = r.json()['author-retrieval-response'][0]['coredata']
                  stats['scopus'] = {
                      'h_index': int(data.get('h-index', 0)),
                      'citations': int(data.get('citation-count', 0)),
                      'documents': int(data.get('document-count', 0))
                  }
                  print('✅ Scopus data updated.')
              else:
                  print(f'❌ Scopus API error: {r.status_code}')
          except Exception as e:
              print(f'❌ Scopus error: {e}')

          # 2. Google Scholar - Ehtiyotkorlik bilan (Timeout bilan)
          print('--- Fetching Google Scholar Data ---')
          try:
              # Qidiruvni boshlaymiz
              search_query = scholarly.search_author_id(os.environ['SCHOLAR_ID'])
              # Faqat kerakli bo'limlarni va tezkor olishni so'raymiz
              author = scholarly.fill(search_query, sections=['basics', 'indices'])
              
              stats['scholar'] = {
                  'h_index': author.get('hindex', 0),
                  'citations': author.get('citedby', 0),
                  'i10_index': author.get('i10index', 0)
              }
              print('✅ Scholar data updated.')
          except Exception as e:
              print(f'⚠️ Scholar failed (likely blocked by Google): {e}')
              # Agar Scholar ishlamasa, eski ma'lumotlarni saqlab qolish yoki 0 qo'yish
              stats['scholar'] = {'h_index': 'N/A', 'citations': 'N/A', 'i10_index': 'N/A'}

          # Ma'lumotlarni saqlash
          os.makedirs('_data', exist_ok=True)
          with open('_data/stats.yml', 'w') as f:
              yaml.dump(stats, f, default_flow_style=False)
          print('--- Process Completed ---')
          "
